!function(){function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function e(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{FXbF:function(t,i,o){"use strict";o.r(i),o.d(i,"TimerPageModule",function(){return _});var s,r,c,l,a=o("ofXK"),u=o("3Pt+"),b=o("TEn/"),d=o("mrSG"),m=o("C6fG"),f=o("fXoL"),h=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}Object(d.c)(t,n),t.prototype.keepAwake=function(){return Object(m.cordova)(this,"keepAwake",{},arguments)},t.prototype.allowSleepAgain=function(){return Object(m.cordova)(this,"allowSleepAgain",{},arguments)},t.pluginName="Insomnia",t.plugin="cordova-plugin-insomnia",t.pluginRef="plugins.insomnia",t.repo="https://github.com/EddyVerbruggen/Insomnia-PhoneGap-Plugin",t.platforms=["Android","Browser","Firefox OS","iOS","Windows","Windows Phone 8"],t.\u0275fac=function(n){return e(n||t)},t.\u0275prov=f.Fb({token:t,factory:function(n){return t.\u0275fac(n)}});var e=f.Qb(t);return t}(m.IonicNativePlugin),p=o("tyNb"),O=o("l5mm"),g=o("vkgz"),k=["createTimerForm"],y=((s=function(){function t(e){n(this,t),this.modalCtrl=e,this.roundsNumber=1,this.defaultTime="00:00:00"}return e(t,[{key:"onDismiss",value:function(){this.modalCtrl.dismiss()}},{key:"onCreateTimer",value:function(n){var t=this.createTimerFormRef.value.fullTime.split(":");this.modalCtrl.dismiss({totalSeconds:60*+t[1]+ +t[2],rounds:this.createTimerFormRef.value.rounds},"confirm","createTimer")}},{key:"onRemoveRound",value:function(){this.roundsNumber--}},{key:"onAddRound",value:function(){this.roundsNumber++}}]),t}()).\u0275fac=function(n){return new(n||s)(f.Jb(b.w))},s.\u0275cmp=f.Db({type:s,selectors:[["ng-component"]],viewQuery:function(n,t){var e;1&n&&f.oc(k,!0),2&n&&f.fc(e=f.Xb())&&(t.createTimerFormRef=e.first)},decls:33,vars:6,consts:[["slot","primary"],[3,"click"],["name","close","slot","icon-only"],[3,"fullscreen"],[3,"submit"],["createTimerForm","ngForm"],["size-sm","6","offset-sm","3",1,"display-flex"],[1,"container","display-flex"],["displayFormat","mm:ss","placeholder","Choose a time","name","fullTime",3,"ngModel","ngModelChange"],["fullTime","ngModel"],[1,"display-block"],[1,"display-block","rounds-number"],["type","number","name","rounds","min","0","placeholder","0",1,"ion-hide",3,"ngModel","ngModelChange"],["rounds","ngModel"],[1,"cta"],["type","button","color","medium   ",3,"disabled","click"],["name","remove-outline","slot","icon-only"],["type","button","color","light",3,"click"],["name","add","slot","icon-only"],["type","submit","expand","block","color","primary",3,"disabled"]],template:function(n,t){if(1&n){var e=f.Pb();f.Ob(0,"ion-header"),f.Ob(1,"ion-toolbar"),f.Ob(2,"ion-title"),f.lc(3,"New timer"),f.Nb(),f.Ob(4,"ion-buttons",0),f.Ob(5,"ion-button",1),f.Wb("click",function(){return t.onDismiss()}),f.Kb(6,"ion-icon",2),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Ob(7,"ion-content",3),f.Ob(8,"form",4,5),f.Wb("submit",function(){f.hc(e);var n=f.gc(9);return t.onCreateTimer(n)}),f.Ob(10,"ion-grid"),f.Ob(11,"ion-row"),f.Ob(12,"ion-col",6),f.Ob(13,"div",7),f.Ob(14,"ion-item"),f.Ob(15,"ion-label"),f.lc(16,"Round duration"),f.Nb(),f.Ob(17,"ion-datetime",8,9),f.Wb("ngModelChange",function(n){return t.defaultTime=n}),f.Nb(),f.Nb(),f.Nb(),f.Ob(19,"div",7),f.Ob(20,"ion-text",10),f.lc(21,"ROUNDS"),f.Nb(),f.Ob(22,"ion-text",11),f.lc(23),f.Nb(),f.Ob(24,"ion-input",12,13),f.Wb("ngModelChange",function(n){return t.roundsNumber=n}),f.Nb(),f.Ob(26,"div",14),f.Ob(27,"ion-button",15),f.Wb("click",function(){return t.onRemoveRound()}),f.Kb(28,"ion-icon",16),f.Nb(),f.Ob(29,"ion-button",17),f.Wb("click",function(){return t.onAddRound()}),f.Kb(30,"ion-icon",18),f.Nb(),f.Nb(),f.Nb(),f.Ob(31,"ion-button",19),f.lc(32,"Create"),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Nb()}if(2&n){var i=f.gc(9);f.yb(7),f.ec("fullscreen",!0),f.yb(10),f.ec("ngModel",t.defaultTime),f.yb(6),f.mc(t.roundsNumber),f.yb(1),f.ec("ngModel",t.roundsNumber),f.yb(3),f.ec("disabled",t.roundsNumber<=1),f.yb(4),f.ec("disabled",i.invalid)}},directives:[b.h,b.t,b.s,b.c,b.b,b.i,b.e,u.g,u.d,u.e,b.g,b.n,b.d,b.k,b.l,b.f,b.z,u.c,u.f,b.r,b.j,b.x],styles:["form[_ngcontent-%COMP%], ion-grid[_ngcontent-%COMP%], ion-row[_ngcontent-%COMP%]{height:100%}.display-block[_ngcontent-%COMP%]{display:block;text-align:center}.display-flex[_ngcontent-%COMP%]{display:flex;flex-flow:column}.container[_ngcontent-%COMP%]{flex:1 1 auto}.rounds-number[_ngcontent-%COMP%]{font-size:3rem}.cta[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex:1 1 auto;align-items:center}"]}),s),N=o("K1R0"),v=o("mlae"),C=o("dDfN"),w=[{path:"",component:(r=function(){function t(e,i){n(this,t),this.insomnia=e,this.modalCtrl=i,this.rounds=1,this.clock=70,this.pause=!0,this.isBlocked=!1,this.initialRounds=this.rounds,this.isDone=!1,this.radius=100,this.percent=0,this.progress=1,this.start=!0,this.PRIMARY_COLOR="#428cff",this.SECONDARY_COLOR="#50c8ff",this.DANGER_COLOR="#ff4961",this._initialClock=this.clock,this.TAP_SOUND="../../assets/sounds/button-50.mp3",this.START="Start",this.PAUSED="Paused",this.ON="On"}return e(t,[{key:"ngOnInit",value:function(){this._audio=new Audio(this.TAP_SOUND)}},{key:"ionViewDidLeave",value:function(){this.onReset()}},{key:"ngOnDestroy",value:function(){this.onReset()}},{key:"onCreateTimer",value:function(){var n=this;this.onReset(),this.modalCtrl.create({keyboardClose:!0,component:y,id:"createTimer"}).then(function(t){return Object(d.a)(n,void 0,void 0,regeneratorRuntime.mark(function n(){var e,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.present(),this.pause=!0,n.next=3,t.onWillDismiss();case 3:e=n.sent,(i=e.data)&&(0!==i.totalSeconds&&(this._initialClock=i.totalSeconds,this.clock=i.totalSeconds),this.initialRounds=i.rounds);case 6:case"end":return n.stop()}},n,this)}))})}},{key:"onToggle",value:function(n){var t=this;this.pause=!this.pause,this.start=!1,this.pause&&this.intervalObs$?this.intervalObs$.unsubscribe():this.intervalObs$=Object(O.a)(1e3).pipe(Object(g.a)(function(){t.percent=Math.floor(t.progress/t._initialClock*100),t.progress++,t.clock--,t.clock>=1&&t.clock<=3&&t._playSound(),t.clock<0&&t.initialRounds>1?t._roundsCount():t.clock<0&&(t.pause=!0,t.isBlocked=!0,t.intervalObs$.unsubscribe()),t.insomnia.keepAwake()})).subscribe(function(){})}},{key:"onReset",value:function(){this.intervalObs$&&this.intervalObs$.unsubscribe(),this.start=!0,this.pause=!0,this.isBlocked=!1,this.clock=this._initialClock,this.rounds=1,this.percent=0,this.progress=1,this.insomnia.allowSleepAgain()}},{key:"getSubtitle",value:function(){return this.start?this.START:this.pause?this.PAUSED:this.ON}},{key:"_playSound",value:function(){this._audio.play()}},{key:"_roundsCount",value:function(){this.progress=1,this.percent=0,this.rounds<this.initialRounds?(this.clock=this._initialClock,this.rounds++):(this.intervalObs$.unsubscribe(),this.pause=!0,this.isBlocked=!0)}}]),t}(),r.\u0275fac=function(n){return new(n||r)(f.Jb(h),f.Jb(b.w))},r.\u0275cmp=f.Db({type:r,selectors:[["app-timer"]],decls:24,vars:25,consts:[["slot","primary"],[3,"click"],["color","primary","name","add","slot","icon-only"],[3,"fullscreen"],[1,"grid","ion-text-center","grid"],[1,"row","ion-align-items-center"],["size","12","size-sm","6","offset-sm","3"],[3,"ngClass","startFromZero","percent","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","innerStrokeColor","animation","animationDuration","title","showTitle","showUnits","showSubtitle","subtitle","titleFontSize","subtitleFontSize","titleColor","click"],[1,"clock"],["size","12","size-sm","6","offset-sm","3",1,"ion-padding-vertical"],[3,"isBlocked","pause","toggle","reset"]],template:function(n,t){1&n&&(f.Ob(0,"ion-header"),f.Ob(1,"ion-toolbar"),f.Ob(2,"ion-title"),f.lc(3,"Timer"),f.Nb(),f.Ob(4,"ion-buttons",0),f.Ob(5,"ion-button",1),f.Wb("click",function(){return t.onCreateTimer()}),f.Kb(6,"ion-icon",2),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Ob(7,"ion-content",3),f.Ob(8,"ion-grid",4),f.Ob(9,"ion-row",5),f.Ob(10,"ion-col",6),f.Ob(11,"circle-progress",7),f.Wb("click",function(){return t.onToggle()}),f.ac(12,"timeFormat"),f.Nb(),f.Nb(),f.Nb(),f.Ob(13,"ion-row",5),f.Ob(14,"ion-col",6),f.Ob(15,"p",8),f.lc(16,"Round"),f.Nb(),f.Ob(17,"p",8),f.lc(18),f.Ob(19,"span"),f.lc(20),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Ob(21,"ion-row",5),f.Ob(22,"ion-col",9),f.Ob(23,"player-controls",10),f.Wb("toggle",function(n){return t.onToggle(n)})("reset",function(){return t.onReset()}),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Nb()),2&n&&(f.yb(7),f.ec("fullscreen",!0),f.yb(4),f.ec("ngClass",t.pause&&!t.start?"paused":"")("startFromZero",!1)("percent",t.percent)("radius",t.radius)("outerStrokeWidth",16)("innerStrokeWidth",8)("outerStrokeColor",t.PRIMARY_COLOR)("innerStrokeColor",t.pause&&!t.start?t.DANGER_COLOR:t.SECONDARY_COLOR)("animation",!0)("animationDuration",100)("title",f.bc(12,23,t.clock))("showTitle",!0)("showUnits",!1)("showSubtitle",!0)("subtitle",t.getSubtitle())("titleFontSize",35)("subtitleFontSize",25)("titleColor",t.PRIMARY_COLOR),f.yb(7),f.mc(t.rounds),f.yb(2),f.nc("/",t.initialRounds,""),f.yb(3),f.ec("isBlocked",t.isBlocked)("pause",t.pause))},directives:[b.h,b.t,b.s,b.c,b.b,b.i,b.e,b.g,b.n,b.d,N.a,a.h,v.a],pipes:[C.a],styles:[".grid[_ngcontent-%COMP%]{display:flex;flex-flow:column;height:100%}.row[_ngcontent-%COMP%]{flex:1 1 auto}.clock[_ngcontent-%COMP%]{font-size:3rem}@media (min-width:540px){.clock[_ngcontent-%COMP%]{font-size:5rem}}.clock[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem;color:var(--ion-color-medium)}p[_ngcontent-%COMP%]{margin:0}"]}),r)}],R=((c=function t(){n(this,t)}).\u0275mod=f.Hb({type:c}),c.\u0275inj=f.Gb({factory:function(n){return new(n||c)},imports:[[p.i.forChild(w)],p.i]}),c),S=o("PCNd"),_=((l=function t(){n(this,t)}).\u0275mod=f.Hb({type:l}),l.\u0275inj=f.Gb({factory:function(n){return new(n||l)},providers:[h],imports:[[a.b,u.a,b.u,R,S.a]]}),l)}}])}();