(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{FXbF:function(t,i,e){"use strict";e.r(i),e.d(i,"TimerPageModule",function(){return y});var n=e("ofXK"),o=e("3Pt+"),s=e("TEn/"),r=e("mrSG"),l=e("C6fG"),c=e("fXoL"),a=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Object(r.c)(i,t),i.prototype.keepAwake=function(){return Object(l.cordova)(this,"keepAwake",{},arguments)},i.prototype.allowSleepAgain=function(){return Object(l.cordova)(this,"allowSleepAgain",{},arguments)},i.pluginName="Insomnia",i.plugin="cordova-plugin-insomnia",i.pluginRef="plugins.insomnia",i.repo="https://github.com/EddyVerbruggen/Insomnia-PhoneGap-Plugin",i.platforms=["Android","Browser","Firefox OS","iOS","Windows","Windows Phone 8"],i.\u0275fac=function(t){return e(t||i)},i.\u0275prov=c.Fb({token:i,factory:function(t){return i.\u0275fac(t)}});var e=c.Qb(i);return i}(l.IonicNativePlugin),u=e("tyNb"),b=e("l5mm"),d=e("vkgz");const h=["createTimerForm"];let m=(()=>{class t{constructor(t){this.modalCtrl=t,this.roundsNumber=1,this.defaultTime="00:00:00"}onDismiss(){this.modalCtrl.dismiss()}onCreateTimer(t){const i=this.createTimerFormRef.value.fullTime.split(":");this.modalCtrl.dismiss({totalSeconds:60*+i[1]+ +i[2],rounds:this.createTimerFormRef.value.rounds},"confirm","createTimer")}onRemoveRound(){this.roundsNumber--}onAddRound(){this.roundsNumber++}}return t.\u0275fac=function(i){return new(i||t)(c.Jb(s.w))},t.\u0275cmp=c.Db({type:t,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&c.oc(h,!0),2&t){let t;c.fc(t=c.Xb())&&(i.createTimerFormRef=t.first)}},decls:33,vars:6,consts:[["slot","primary"],[3,"click"],["name","close","slot","icon-only"],[3,"fullscreen"],[3,"submit"],["createTimerForm","ngForm"],["size-sm","6","offset-sm","3",1,"display-flex"],[1,"container","display-flex"],["displayFormat","mm:ss","placeholder","Choose a time","name","fullTime",3,"ngModel","ngModelChange"],["fullTime","ngModel"],[1,"display-block"],[1,"display-block","rounds-number"],["type","number","name","rounds","min","0","placeholder","0",1,"ion-hide",3,"ngModel","ngModelChange"],["rounds","ngModel"],[1,"cta"],["type","button","color","medium   ",3,"disabled","click"],["name","remove-outline","slot","icon-only"],["type","button","color","light",3,"click"],["name","add","slot","icon-only"],["type","submit","expand","block","color","primary",3,"disabled"]],template:function(t,i){if(1&t){const t=c.Pb();c.Ob(0,"ion-header"),c.Ob(1,"ion-toolbar"),c.Ob(2,"ion-title"),c.lc(3,"New timer"),c.Nb(),c.Ob(4,"ion-buttons",0),c.Ob(5,"ion-button",1),c.Wb("click",function(){return i.onDismiss()}),c.Kb(6,"ion-icon",2),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(7,"ion-content",3),c.Ob(8,"form",4,5),c.Wb("submit",function(){c.hc(t);const e=c.gc(9);return i.onCreateTimer(e)}),c.Ob(10,"ion-grid"),c.Ob(11,"ion-row"),c.Ob(12,"ion-col",6),c.Ob(13,"div",7),c.Ob(14,"ion-item"),c.Ob(15,"ion-label"),c.lc(16,"Round duration"),c.Nb(),c.Ob(17,"ion-datetime",8,9),c.Wb("ngModelChange",function(t){return i.defaultTime=t}),c.Nb(),c.Nb(),c.Nb(),c.Ob(19,"div",7),c.Ob(20,"ion-text",10),c.lc(21,"ROUNDS"),c.Nb(),c.Ob(22,"ion-text",11),c.lc(23),c.Nb(),c.Ob(24,"ion-input",12,13),c.Wb("ngModelChange",function(t){return i.roundsNumber=t}),c.Nb(),c.Ob(26,"div",14),c.Ob(27,"ion-button",15),c.Wb("click",function(){return i.onRemoveRound()}),c.Kb(28,"ion-icon",16),c.Nb(),c.Ob(29,"ion-button",17),c.Wb("click",function(){return i.onAddRound()}),c.Kb(30,"ion-icon",18),c.Nb(),c.Nb(),c.Nb(),c.Ob(31,"ion-button",19),c.lc(32,"Create"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()}if(2&t){const t=c.gc(9);c.yb(7),c.ec("fullscreen",!0),c.yb(10),c.ec("ngModel",i.defaultTime),c.yb(6),c.mc(i.roundsNumber),c.yb(1),c.ec("ngModel",i.roundsNumber),c.yb(3),c.ec("disabled",i.roundsNumber<=1),c.yb(4),c.ec("disabled",t.invalid)}},directives:[s.h,s.t,s.s,s.c,s.b,s.i,s.e,o.g,o.d,o.e,s.g,s.n,s.d,s.k,s.l,s.f,s.z,o.c,o.f,s.r,s.j,s.x],styles:["form[_ngcontent-%COMP%], ion-grid[_ngcontent-%COMP%], ion-row[_ngcontent-%COMP%]{height:100%}.display-block[_ngcontent-%COMP%]{display:block;text-align:center}.display-flex[_ngcontent-%COMP%]{display:flex;flex-flow:column}.container[_ngcontent-%COMP%]{flex:1 1 auto}.rounds-number[_ngcontent-%COMP%]{font-size:3rem}.cta[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex:1 1 auto;align-items:center}"]}),t})();var p=e("K1R0"),f=e("mlae"),O=e("dDfN");const g=[{path:"",component:(()=>{class t{constructor(t,i){this.insomnia=t,this.modalCtrl=i,this.rounds=1,this.clock=70,this.pause=!0,this.isBlocked=!1,this.initialRounds=this.rounds,this.isDone=!1,this.radius=100,this.percent=0,this.progress=1,this.start=!0,this.PRIMARY_COLOR="#428cff",this.SECONDARY_COLOR="#50c8ff",this.DANGER_COLOR="#ff4961",this._initialClock=this.clock,this.TAP_SOUND="../../assets/sounds/button-50.mp3",this.START="Start",this.PAUSED="Paused",this.ON="On"}ngOnInit(){this._audio=new Audio(this.TAP_SOUND)}ionViewDidLeave(){this.onReset()}ngOnDestroy(){this.onReset()}onCreateTimer(){this.onReset(),this.modalCtrl.create({keyboardClose:!0,component:m,id:"createTimer"}).then(t=>Object(r.a)(this,void 0,void 0,function*(){t.present(),this.pause=!0;const{data:i}=yield t.onWillDismiss();i&&(0!==i.totalSeconds&&(this._initialClock=i.totalSeconds,this.clock=i.totalSeconds),this.initialRounds=i.rounds)}))}onToggle(t){this.pause=!this.pause,this.start=!1,this.pause&&this.intervalObs$?this.intervalObs$.unsubscribe():this.intervalObs$=Object(b.a)(1e3).pipe(Object(d.a)(()=>{this.percent=Math.floor(this.progress/this._initialClock*100),this.progress++,this.clock--,this.clock>=1&&this.clock<=3&&this._playSound(),this.clock<0&&this.initialRounds>1?this._roundsCount():this.clock<0&&(this.pause=!0,this.isBlocked=!0,this.intervalObs$.unsubscribe()),this.insomnia.keepAwake()})).subscribe(()=>{})}onReset(){this.intervalObs$&&this.intervalObs$.unsubscribe(),this.start=!0,this.pause=!0,this.isBlocked=!1,this.clock=this._initialClock,this.rounds=1,this.percent=0,this.progress=1,this.insomnia.allowSleepAgain()}getSubtitle(){return this.start?this.START:this.pause?this.PAUSED:this.ON}_playSound(){this._audio.play()}_roundsCount(){this.progress=1,this.percent=0,this.rounds<this.initialRounds?(this.clock=this._initialClock,this.rounds++):(this.intervalObs$.unsubscribe(),this.pause=!0,this.isBlocked=!0)}}return t.\u0275fac=function(i){return new(i||t)(c.Jb(a),c.Jb(s.w))},t.\u0275cmp=c.Db({type:t,selectors:[["app-timer"]],decls:24,vars:25,consts:[["slot","primary"],[3,"click"],["color","primary","name","add","slot","icon-only"],[3,"fullscreen"],[1,"grid","ion-text-center","grid"],[1,"row","ion-align-items-center"],["size","12","size-sm","6","offset-sm","3"],[3,"ngClass","startFromZero","percent","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","innerStrokeColor","animation","animationDuration","title","showTitle","showUnits","showSubtitle","subtitle","titleFontSize","subtitleFontSize","titleColor","click"],[1,"clock"],["size","12","size-sm","6","offset-sm","3",1,"ion-padding-vertical"],[3,"isBlocked","pause","toggle","reset"]],template:function(t,i){1&t&&(c.Ob(0,"ion-header"),c.Ob(1,"ion-toolbar"),c.Ob(2,"ion-title"),c.lc(3,"Timer"),c.Nb(),c.Ob(4,"ion-buttons",0),c.Ob(5,"ion-button",1),c.Wb("click",function(){return i.onCreateTimer()}),c.Kb(6,"ion-icon",2),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(7,"ion-content",3),c.Ob(8,"ion-grid",4),c.Ob(9,"ion-row",5),c.Ob(10,"ion-col",6),c.Ob(11,"circle-progress",7),c.Wb("click",function(){return i.onToggle()}),c.ac(12,"timeFormat"),c.Nb(),c.Nb(),c.Nb(),c.Ob(13,"ion-row",5),c.Ob(14,"ion-col",6),c.Ob(15,"p",8),c.lc(16,"Round"),c.Nb(),c.Ob(17,"p",8),c.lc(18),c.Ob(19,"span"),c.lc(20),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(21,"ion-row",5),c.Ob(22,"ion-col",9),c.Ob(23,"player-controls",10),c.Wb("toggle",function(t){return i.onToggle(t)})("reset",function(){return i.onReset()}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&t&&(c.yb(7),c.ec("fullscreen",!0),c.yb(4),c.ec("ngClass",i.pause&&!i.start?"paused":"")("startFromZero",!1)("percent",i.percent)("radius",i.radius)("outerStrokeWidth",16)("innerStrokeWidth",8)("outerStrokeColor",i.PRIMARY_COLOR)("innerStrokeColor",i.pause&&!i.start?i.DANGER_COLOR:i.SECONDARY_COLOR)("animation",!0)("animationDuration",100)("title",c.bc(12,23,i.clock))("showTitle",!0)("showUnits",!1)("showSubtitle",!0)("subtitle",i.getSubtitle())("titleFontSize",35)("subtitleFontSize",25)("titleColor",i.PRIMARY_COLOR),c.yb(7),c.mc(i.rounds),c.yb(2),c.nc("/",i.initialRounds,""),c.yb(3),c.ec("isBlocked",i.isBlocked)("pause",i.pause))},directives:[s.h,s.t,s.s,s.c,s.b,s.i,s.e,s.g,s.n,s.d,p.a,n.h,f.a],pipes:[O.a],styles:[".grid[_ngcontent-%COMP%]{display:flex;flex-flow:column;height:100%}.row[_ngcontent-%COMP%]{flex:1 1 auto}.clock[_ngcontent-%COMP%]{font-size:3rem}@media (min-width:540px){.clock[_ngcontent-%COMP%]{font-size:5rem}}.clock[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem;color:var(--ion-color-medium)}p[_ngcontent-%COMP%]{margin:0}"]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(i){return new(i||t)},imports:[[u.i.forChild(g)],u.i]}),t})();var N=e("PCNd");let y=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(i){return new(i||t)},providers:[a],imports:[[n.b,o.a,s.u,k,N.a]]}),t})()}}]);