(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{FXbF:function(n,t,i){"use strict";i.r(t),i.d(t,"TimerPageModule",function(){return N});var e=i("ofXK"),o=i("3Pt+"),s=i("TEn/"),r=i("mrSG"),c=i("C6fG"),l=i("fXoL"),a=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}Object(r.c)(t,n),t.prototype.keepAwake=function(){return Object(c.cordova)(this,"keepAwake",{},arguments)},t.prototype.allowSleepAgain=function(){return Object(c.cordova)(this,"allowSleepAgain",{},arguments)},t.pluginName="Insomnia",t.plugin="cordova-plugin-insomnia",t.pluginRef="plugins.insomnia",t.repo="https://github.com/EddyVerbruggen/Insomnia-PhoneGap-Plugin",t.platforms=["Android","Browser","Firefox OS","iOS","Windows","Windows Phone 8"],t.\u0275fac=function(n){return i(n||t)},t.\u0275prov=l.Fb({token:t,factory:function(n){return t.\u0275fac(n)}});var i=l.Qb(t);return t}(c.IonicNativePlugin),b=i("tyNb"),u=i("l5mm"),d=i("vkgz");const m=["createTimerForm"];let h=(()=>{class n{constructor(n){this.modalCtrl=n,this.roundsNumber=1,this.defaultTime="00:00:00"}onDismiss(){this.modalCtrl.dismiss()}onCreateTimer(n){const t=this.createTimerFormRef.value.fullTime.split(":");this.modalCtrl.dismiss({totalSeconds:60*+t[1]+ +t[2],rounds:this.createTimerFormRef.value.rounds},"confirm","createTimer")}onRemoveRound(){this.roundsNumber--}onAddRound(){this.roundsNumber++}}return n.\u0275fac=function(t){return new(t||n)(l.Jb(s.w))},n.\u0275cmp=l.Db({type:n,selectors:[["ng-component"]],viewQuery:function(n,t){if(1&n&&l.oc(m,!0),2&n){let n;l.fc(n=l.Xb())&&(t.createTimerFormRef=n.first)}},decls:33,vars:6,consts:[["slot","primary"],[3,"click"],["name","close","slot","icon-only"],[3,"fullscreen"],[3,"submit"],["createTimerForm","ngForm"],["size-sm","6","offset-sm","3",1,"display-flex"],[1,"container","display-flex"],["displayFormat","mm:ss","placeholder","Choose a time","name","fullTime",3,"ngModel","ngModelChange"],["fullTime","ngModel"],[1,"display-block"],[1,"display-block","rounds-number"],["type","number","name","rounds","min","0","placeholder","0",1,"ion-hide",3,"ngModel","ngModelChange"],["rounds","ngModel"],[1,"cta"],["type","button","color","medium   ",3,"disabled","click"],["name","remove-outline","slot","icon-only"],["type","button","color","light",3,"click"],["name","add","slot","icon-only"],["type","submit","expand","block","color","primary",3,"disabled"]],template:function(n,t){if(1&n){const n=l.Pb();l.Ob(0,"ion-header"),l.Ob(1,"ion-toolbar"),l.Ob(2,"ion-title"),l.lc(3,"New timer"),l.Nb(),l.Ob(4,"ion-buttons",0),l.Ob(5,"ion-button",1),l.Wb("click",function(){return t.onDismiss()}),l.Kb(6,"ion-icon",2),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(7,"ion-content",3),l.Ob(8,"form",4,5),l.Wb("submit",function(){l.hc(n);const i=l.gc(9);return t.onCreateTimer(i)}),l.Ob(10,"ion-grid"),l.Ob(11,"ion-row"),l.Ob(12,"ion-col",6),l.Ob(13,"div",7),l.Ob(14,"ion-item"),l.Ob(15,"ion-label"),l.lc(16,"Round duration"),l.Nb(),l.Ob(17,"ion-datetime",8,9),l.Wb("ngModelChange",function(n){return t.defaultTime=n}),l.Nb(),l.Nb(),l.Nb(),l.Ob(19,"div",7),l.Ob(20,"ion-text",10),l.lc(21,"ROUNDS"),l.Nb(),l.Ob(22,"ion-text",11),l.lc(23),l.Nb(),l.Ob(24,"ion-input",12,13),l.Wb("ngModelChange",function(n){return t.roundsNumber=n}),l.Nb(),l.Ob(26,"div",14),l.Ob(27,"ion-button",15),l.Wb("click",function(){return t.onRemoveRound()}),l.Kb(28,"ion-icon",16),l.Nb(),l.Ob(29,"ion-button",17),l.Wb("click",function(){return t.onAddRound()}),l.Kb(30,"ion-icon",18),l.Nb(),l.Nb(),l.Nb(),l.Ob(31,"ion-button",19),l.lc(32,"Create"),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb()}if(2&n){const n=l.gc(9);l.yb(7),l.ec("fullscreen",!0),l.yb(10),l.ec("ngModel",t.defaultTime),l.yb(6),l.mc(t.roundsNumber),l.yb(1),l.ec("ngModel",t.roundsNumber),l.yb(3),l.ec("disabled",t.roundsNumber<=1),l.yb(4),l.ec("disabled",n.invalid)}},directives:[s.h,s.t,s.s,s.c,s.b,s.i,s.e,o.g,o.d,o.e,s.g,s.n,s.d,s.k,s.l,s.f,s.z,o.c,o.f,s.r,s.j,s.x],styles:["form[_ngcontent-%COMP%], ion-grid[_ngcontent-%COMP%], ion-row[_ngcontent-%COMP%]{height:100%}.display-block[_ngcontent-%COMP%]{display:block;text-align:center}.display-flex[_ngcontent-%COMP%]{display:flex;flex-flow:column}.container[_ngcontent-%COMP%]{flex:1 1 auto}.rounds-number[_ngcontent-%COMP%]{font-size:3rem}.cta[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex:1 1 auto;align-items:center}"]}),n})();var p=i("K1R0"),f=i("mlae"),g=i("dDfN");const O=[{path:"",component:(()=>{class n{constructor(n,t){this.insomnia=n,this.modalCtrl=t,this.rounds=1,this.clock=70,this.pause=!0,this.isBlocked=!1,this.initialRounds=this.rounds,this.isDone=!1,this.radius=100,this.percent=0,this.progress=1,this._initialClock=this.clock,this.TAP_SOUND="../../assets/sounds/button-50.mp3"}ngOnInit(){this._audio=new Audio(this.TAP_SOUND)}ionViewDidLeave(){this.onReset()}ngOnDestroy(){this.onReset()}onCreateTimer(){this.onReset(),this.modalCtrl.create({keyboardClose:!0,component:h,id:"createTimer"}).then(n=>Object(r.a)(this,void 0,void 0,function*(){n.present(),this.pause=!0;const{data:t}=yield n.onWillDismiss();t&&(0!==t.totalSeconds&&(this._initialClock=t.totalSeconds,this.clock=t.totalSeconds),this.initialRounds=t.rounds)}))}onToggle(n){this.pause=!this.pause,this.pause&&this.intervalObs$?this.intervalObs$.unsubscribe():this.intervalObs$=Object(u.a)(1e3).pipe(Object(d.a)(()=>{this.percent=Math.floor(this.progress/this._initialClock*100),this.progress++,this.clock--,this.clock>=1&&this.clock<=3&&this._playSound(),this.clock<0&&this.initialRounds>1?this._roundsCount():this.clock<0&&(this.pause=!0,this.isBlocked=!0,this.intervalObs$.unsubscribe()),this.insomnia.keepAwake()})).subscribe(()=>{})}onReset(){this.intervalObs$&&this.intervalObs$.unsubscribe(),this.pause=!0,this.isBlocked=!1,this.clock=this._initialClock,this.rounds=1,this.percent=0,this.progress=1,this.insomnia.allowSleepAgain()}_playSound(){this._audio.play()}_roundsCount(){this.progress=1,this.percent=0,this.rounds<this.initialRounds?(this.clock=this._initialClock,this.rounds++):(this.intervalObs$.unsubscribe(),this.pause=!0,this.isBlocked=!0)}}return n.\u0275fac=function(t){return new(t||n)(l.Jb(a),l.Jb(s.w))},n.\u0275cmp=l.Db({type:n,selectors:[["app-timer"]],decls:24,vars:19,consts:[["slot","primary"],[3,"click"],["color","primary","name","add","slot","icon-only"],[1,"grid","ion-text-center","grid"],["size","12","size-sm","6","offset-sm","3"],[3,"percent","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","innerStrokeColor","animation","animationDuration","title","showTitle","showUnits","showSubtitle","subtitle","click"],[1,"row","ion-align-items-center"],[1,"clock"],["size","12","size-sm","6","offset-sm","3",1,"ion-padding-vertical"],[3,"isBlocked","pause","toggle","reset"]],template:function(n,t){1&n&&(l.Ob(0,"ion-header"),l.Ob(1,"ion-toolbar"),l.Ob(2,"ion-title"),l.lc(3,"Timer"),l.Nb(),l.Ob(4,"ion-buttons",0),l.Ob(5,"ion-button",1),l.Wb("click",function(){return t.onCreateTimer()}),l.Kb(6,"ion-icon",2),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(7,"ion-content"),l.Ob(8,"ion-grid",3),l.Ob(9,"ion-row"),l.Ob(10,"ion-col",4),l.Ob(11,"circle-progress",5),l.Wb("click",function(){return t.onToggle()}),l.ac(12,"timeFormat"),l.Nb(),l.Nb(),l.Nb(),l.Ob(13,"ion-row",6),l.Ob(14,"ion-col",4),l.Ob(15,"p",7),l.lc(16,"Round"),l.Nb(),l.Ob(17,"p",7),l.lc(18),l.Ob(19,"span"),l.lc(20),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(21,"ion-row"),l.Ob(22,"ion-col",8),l.Ob(23,"player-controls",9),l.Wb("toggle",function(n){return t.onToggle(n)})("reset",function(){return t.onReset()}),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb()),2&n&&(l.yb(11),l.ec("percent",t.percent)("radius",t.radius)("outerStrokeWidth",16)("innerStrokeWidth",8)("outerStrokeColor","#428cff")("innerStrokeColor",t.pause?"#ff4961":"#50c8ff")("animation",!1)("animationDuration",300)("title",l.bc(12,17,t.clock))("showTitle",!0)("showUnits",!1)("showSubtitle",!0)("subtitle",t.pause?"Resting":"On"),l.yb(7),l.mc(t.rounds),l.yb(2),l.nc("/",t.initialRounds,""),l.yb(3),l.ec("isBlocked",t.isBlocked)("pause",t.pause))},directives:[s.h,s.t,s.s,s.c,s.b,s.i,s.e,s.g,s.n,s.d,p.a,f.a],pipes:[g.a],styles:[".grid[_ngcontent-%COMP%]{display:flex;flex-flow:column;height:100%}.row[_ngcontent-%COMP%]{flex:1 1 auto}.clock[_ngcontent-%COMP%]{font-size:4rem}@media (min-width:540px){.clock[_ngcontent-%COMP%]{font-size:5rem}}.clock[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:3rem;color:var(--ion-color-medium)}p[_ngcontent-%COMP%]{margin:0}"]}),n})()}];let k=(()=>{class n{}return n.\u0275mod=l.Hb({type:n}),n.\u0275inj=l.Gb({factory:function(t){return new(t||n)},imports:[[b.i.forChild(O)],b.i]}),n})();var y=i("PCNd");let N=(()=>{class n{}return n.\u0275mod=l.Hb({type:n}),n.\u0275inj=l.Gb({factory:function(t){return new(t||n)},providers:[a],imports:[[e.b,o.a,s.u,k,y.a]]}),n})()}}]);