(self.webpackChunkionic_timer=self.webpackChunkionic_timer||[]).push([[4212],{4212:function(t,i,n){"use strict";n.r(i),n.d(i,{TimerPageModule:function(){return k}});var e=n(8583),o=n(665),s=n(2593),r=n(4762),l=n(8739),c=n(8720),u=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(i,t),i.prototype.keepAwake=function(){return(0,l.cordova)(this,"keepAwake",{},arguments)},i.prototype.allowSleepAgain=function(){return(0,l.cordova)(this,"allowSleepAgain",{},arguments)},i.pluginName="Insomnia",i.plugin="cordova-plugin-insomnia",i.pluginRef="plugins.insomnia",i.repo="https://github.com/EddyVerbruggen/Insomnia-PhoneGap-Plugin",i.platforms=["Android","Browser","Firefox OS","iOS","Windows","Windows Phone 8"],i.\u0275fac=function(){var t;return function(n){return(t||(t=c.n5z(i)))(n||i)}}(),i.\u0275prov=c.Yz7({token:i,factory:function(t){return i.\u0275fac(t)}}),i}(l.KY),a=n(1323),d=n(945),h=n(8307);const m=["createTimerForm"];let p=(()=>{class t{constructor(t){this.modalCtrl=t,this.roundsNumber=1,this.defaultTime="00:00:00"}onDismiss(){this.modalCtrl.dismiss()}onCreateTimer(t){const i=this.createTimerFormRef.value.fullTime.split(":");this.modalCtrl.dismiss({totalSeconds:60*+i[1]+ +i[2],rounds:this.createTimerFormRef.value.rounds},"confirm","createTimer")}onRemoveRound(){this.roundsNumber--}onAddRound(){this.roundsNumber++}}return t.\u0275fac=function(i){return new(i||t)(c.Y36(s.IN))},t.\u0275cmp=c.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&c.Gf(m,5),2&t){let t;c.iGM(t=c.CRH())&&(i.createTimerFormRef=t.first)}},decls:33,vars:6,consts:[["slot","primary"],[3,"click"],["name","close","slot","icon-only"],[3,"fullscreen"],[3,"submit"],["createTimerForm","ngForm"],["size-sm","6","offset-sm","3",1,"display-flex"],[1,"container","display-flex"],["displayFormat","mm:ss","placeholder","Choose a time","name","fullTime",3,"ngModel","ngModelChange"],["fullTime","ngModel"],[1,"display-block"],[1,"display-block","rounds-number"],["type","number","name","rounds","min","0","placeholder","0",1,"ion-hide",3,"ngModel","ngModelChange"],["rounds","ngModel"],[1,"cta"],["type","button","color","medium   ",3,"disabled","click"],["name","remove-outline","slot","icon-only"],["type","button","color","light",3,"click"],["name","add","slot","icon-only"],["type","submit","expand","block","color","primary",3,"disabled"]],template:function(t,i){if(1&t){const t=c.EpF();c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title"),c._uU(3,"New timer"),c.qZA(),c.TgZ(4,"ion-buttons",0),c.TgZ(5,"ion-button",1),c.NdJ("click",function(){return i.onDismiss()}),c._UZ(6,"ion-icon",2),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"ion-content",3),c.TgZ(8,"form",4,5),c.NdJ("submit",function(){c.CHM(t);const n=c.MAs(9);return i.onCreateTimer(n)}),c.TgZ(10,"ion-grid"),c.TgZ(11,"ion-row"),c.TgZ(12,"ion-col",6),c.TgZ(13,"div",7),c.TgZ(14,"ion-item"),c.TgZ(15,"ion-label"),c._uU(16,"Round duration"),c.qZA(),c.TgZ(17,"ion-datetime",8,9),c.NdJ("ngModelChange",function(t){return i.defaultTime=t}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"div",7),c.TgZ(20,"ion-text",10),c._uU(21,"ROUNDS"),c.qZA(),c.TgZ(22,"ion-text",11),c._uU(23),c.qZA(),c.TgZ(24,"ion-input",12,13),c.NdJ("ngModelChange",function(t){return i.roundsNumber=t}),c.qZA(),c.TgZ(26,"div",14),c.TgZ(27,"ion-button",15),c.NdJ("click",function(){return i.onRemoveRound()}),c._UZ(28,"ion-icon",16),c.qZA(),c.TgZ(29,"ion-button",17),c.NdJ("click",function(){return i.onAddRound()}),c._UZ(30,"ion-icon",18),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"ion-button",19),c._uU(32,"Create"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.MAs(9);c.xp6(7),c.Q6J("fullscreen",!0),c.xp6(10),c.Q6J("ngModel",i.defaultTime),c.xp6(6),c.Oqu(i.roundsNumber),c.xp6(1),c.Q6J("ngModel",i.roundsNumber),c.xp6(3),c.Q6J("disabled",i.roundsNumber<=1),c.xp6(4),c.Q6J("disabled",t.invalid)}},directives:[s.Gu,s.sr,s.wd,s.Sm,s.YG,s.gu,s.W2,o._Y,o.JL,o.F,s.jY,s.Nd,s.wI,s.Ie,s.Q$,s.x4,s.QI,o.JJ,o.On,s.yW,s.pK,s.as],styles:["form[_ngcontent-%COMP%], ion-grid[_ngcontent-%COMP%], ion-row[_ngcontent-%COMP%]{height:100%}.display-block[_ngcontent-%COMP%]{display:block;text-align:center}.display-flex[_ngcontent-%COMP%]{display:flex;flex-flow:column}.container[_ngcontent-%COMP%]{flex:1 1 auto}.rounds-number[_ngcontent-%COMP%]{font-size:3rem}.cta[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex:1 1 auto;align-items:center}"]}),t})();var g=n(6876),f=n(996),Z=n(5161);const T=[{path:"",component:(()=>{class t{constructor(t,i){this.insomnia=t,this.modalCtrl=i,this.rounds=1,this.clock=70,this.pause=!0,this.isBlocked=!1,this.initialRounds=this.rounds,this.isDone=!1,this.radius=100,this.percent=0,this.progress=1,this.start=!0,this.PRIMARY_COLOR="#428cff",this.SECONDARY_COLOR="#50c8ff",this.DANGER_COLOR="#ff4961",this._initialClock=this.clock,this.TAP_SOUND="../../assets/sounds/button-50.mp3",this.START="Start",this.PAUSED="Paused",this.ON="On"}ngOnInit(){this._audio=new Audio(this.TAP_SOUND),console.log(this.TAP_SOUND)}ionViewDidLeave(){this.onReset()}ngOnDestroy(){this.onReset()}onCreateTimer(){this.onReset(),this.modalCtrl.create({keyboardClose:!0,component:p,id:"createTimer"}).then(t=>(0,r.mG)(this,void 0,void 0,function*(){t.present(),this.pause=!0;const{data:i}=yield t.onWillDismiss();i&&(0!==i.totalSeconds&&(this._initialClock=i.totalSeconds,this.clock=i.totalSeconds),this.initialRounds=i.rounds)}))}onToggle(t){this.pause=!this.pause,this.start=!1,this.pause&&this.intervalObs$?this.intervalObs$.unsubscribe():this.intervalObs$=(0,d.F)(1e3).pipe((0,h.b)(()=>{this.percent=Math.floor(this.progress/this._initialClock*100),this.progress++,this.clock--,this.clock>=1&&this.clock<=3&&this._playSound(),this.clock<0&&this.initialRounds>1?this._roundsCount():this.clock<0&&(this.pause=!0,this.isBlocked=!0,this.intervalObs$.unsubscribe()),this.insomnia.keepAwake()})).subscribe(()=>{})}onReset(){this.intervalObs$&&this.intervalObs$.unsubscribe(),this.start=!0,this.pause=!0,this.isBlocked=!1,this.clock=this._initialClock,this.rounds=1,this.percent=0,this.progress=1,this.insomnia.allowSleepAgain()}getSubtitle(){return this.start?this.START:this.pause?this.PAUSED:this.ON}_playSound(){this._audio.play()}_roundsCount(){this.progress=1,this.percent=0,this.rounds<this.initialRounds?(this.clock=this._initialClock,this.rounds++):(this.intervalObs$.unsubscribe(),this.pause=!0,this.isBlocked=!0)}}return t.\u0275fac=function(i){return new(i||t)(c.Y36(u),c.Y36(s.IN))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-timer"]],decls:24,vars:25,consts:[["slot","primary"],[3,"click"],["color","primary","name","add","slot","icon-only"],[3,"fullscreen"],[1,"grid","ion-text-center","grid"],[1,"row","ion-align-items-center"],["size","12","size-sm","6","offset-sm","3"],[3,"ngClass","startFromZero","percent","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","innerStrokeColor","animation","animationDuration","title","showTitle","showUnits","showSubtitle","subtitle","titleFontSize","subtitleFontSize","titleColor","click"],[1,"clock"],["size","12","size-sm","6","offset-sm","3",1,"ion-padding-vertical"],[3,"isBlocked","pause","toggle","reset"]],template:function(t,i){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title"),c._uU(3,"Timer"),c.qZA(),c.TgZ(4,"ion-buttons",0),c.TgZ(5,"ion-button",1),c.NdJ("click",function(){return i.onCreateTimer()}),c._UZ(6,"ion-icon",2),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"ion-content",3),c.TgZ(8,"ion-grid",4),c.TgZ(9,"ion-row",5),c.TgZ(10,"ion-col",6),c.TgZ(11,"circle-progress",7),c.NdJ("click",function(){return i.onToggle()}),c.ALo(12,"timeFormat"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"ion-row",5),c.TgZ(14,"ion-col",6),c.TgZ(15,"p",8),c._uU(16,"Round"),c.qZA(),c.TgZ(17,"p",8),c._uU(18),c.TgZ(19,"span"),c._uU(20),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"ion-row",5),c.TgZ(22,"ion-col",9),c.TgZ(23,"player-controls",10),c.NdJ("toggle",function(){return i.onToggle()})("reset",function(){return i.onReset()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(7),c.Q6J("fullscreen",!0),c.xp6(4),c.Q6J("ngClass",i.pause&&!i.start?"paused":"")("startFromZero",!1)("percent",i.percent)("radius",i.radius)("outerStrokeWidth",16)("innerStrokeWidth",8)("outerStrokeColor",i.PRIMARY_COLOR)("innerStrokeColor",i.pause&&!i.start?i.DANGER_COLOR:i.SECONDARY_COLOR)("animation",!0)("animationDuration",100)("title",c.lcZ(12,23,i.clock))("showTitle",!0)("showUnits",!1)("showSubtitle",!0)("subtitle",i.getSubtitle())("titleFontSize",35)("subtitleFontSize",25)("titleColor",i.PRIMARY_COLOR),c.xp6(7),c.Oqu(i.rounds),c.xp6(2),c.hij("/",i.initialRounds,""),c.xp6(3),c.Q6J("isBlocked",i.isBlocked)("pause",i.pause))},directives:[s.Gu,s.sr,s.wd,s.Sm,s.YG,s.gu,s.W2,s.jY,s.Nd,s.wI,g.nu,e.mk,f.M],pipes:[Z.x],styles:[".grid[_ngcontent-%COMP%]{display:flex;flex-flow:column;height:100%}.row[_ngcontent-%COMP%]{flex:1 1 auto}.clock[_ngcontent-%COMP%]{font-size:3rem}@media (min-width: 540px){.clock[_ngcontent-%COMP%]{font-size:5rem}}.clock[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem;color:var(--ion-color-medium)}p[_ngcontent-%COMP%]{margin:0}"]}),t})()}];let A=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[a.Bz.forChild(T)],a.Bz]}),t})();var b=n(4466);let k=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({providers:[u],imports:[[e.ez,o.u5,s.Pc,A,b.m]]}),t})()}}]);