!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}(self.webpackChunkionic_timer=self.webpackChunkionic_timer||[]).push([[6282],{9771:function(e,o,i){"use strict";i.r(o),i.d(o,{TabataPageModule:function(){return x}});var s,r,c=i(8583),a=i(665),l=i(2593),u=i(1323),p=i(4762),d=i(945),g=i(8307),f=i(8720),h=function(){var e=function(){function e(n){t(this,e),this.modalCtrl=n}return n(e,[{key:"onDismiss",value:function(){this.modalCtrl.dismiss()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Y36(l.IN))},e.\u0275cmp=f.Xpm({type:e,selectors:[["ng-component"]],decls:8,vars:1,consts:[["slot","primary"],[3,"click"],["name","close","slot","icon-only"],[3,"fullscreen"]],template:function(t,e){1&t&&(f.TgZ(0,"ion-header"),f.TgZ(1,"ion-toolbar"),f.TgZ(2,"ion-title"),f._uU(3,"New Tabata"),f.qZA(),f.TgZ(4,"ion-buttons",0),f.TgZ(5,"ion-button",1),f.NdJ("click",function(){return e.onDismiss()}),f._UZ(6,"ion-icon",2),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(7,"ion-content",3)),2&t&&(f.xp6(7),f.Q6J("fullscreen",!0))},directives:[l.Gu,l.sr,l.wd,l.Sm,l.YG,l.gu,l.W2],encapsulation:2}),e}(),m=(function(t){t.getReady="Get ready",t.work="Work",t.rest="Rest",t.done="Done"}(m||(m={})),m),Z=(function(t){t[t.getReady=0]="getReady",t[t.work=1]="work",t[t.rest=2]="rest"}(Z||(Z={})),Z),T=i(996),y=i(5161),k=[{path:"",component:(s=function(){function e(n){t(this,e),this.modalCtrl=n,this.round=1,this.clock=10,this.timeElapsed=0,this.pause=!0,this.isBlocked=!1,this.initialRounds=8,this.isDone=!1,this.intervalTypeTextColor="warning-color",this._initialClock=this.clock,this.TAP_SOUND="./assets/sounds/button-50.mp3"}return n(e,[{key:"ngOnInit",value:function(){this._audio=new Audio(this.TAP_SOUND),this.textInfo=m.getReady,this.intervalType=Z.getReady}},{key:"ionViewDidLeave",value:function(){this.onReset()}},{key:"ngOnDestroy",value:function(){this.onReset()}},{key:"onCreateTabata",value:function(){var t=this;this.onReset(),this.modalCtrl.create({keyboardClose:!0,component:h,id:"createTimer"}).then(function(e){return(0,p.mG)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.present(),this.pause=!0,t.next=3,e.onWillDismiss();case 3:n=t.sent,(o=n.data)&&(console.log("data: ",o),this._initialClock=o.timer,this.initialRounds=o.rounds,this.clock=o.timer);case 6:case"end":return t.stop()}},t,this)}))})}},{key:"onToggle",value:function(t){var e=this;this.pause=t,t?this.intervalObs$.unsubscribe():this.intervalObs$=(0,d.F)(1e3).pipe((0,g.b)(function(){e.clock--,e.timeElapsed++,e.clock>=1&&e.clock<=3&&e._playSound(),e.clock<1&&e.intervalType===Z.rest&&e._roundsCount(),(e.intervalType===Z.getReady||e.intervalType===Z.rest)&&e.clock<1?(e.textInfo=m.work,e.intervalType=Z.work,e.clock=20,e.intervalTypeTextColor="primary-color"):e.intervalType===Z.work&&e.clock<1&&(e.textInfo=m.rest,e.intervalType=Z.rest,e.clock=10,e.intervalTypeTextColor="success-color"),console.log(e.clock)})).subscribe(function(){})}},{key:"onReset",value:function(){this.intervalObs$&&this.intervalObs$.unsubscribe(),this.pause=!0,this.isBlocked=!1,this.clock=this._initialClock,this.round=1,this.timeElapsed=0,this.intervalType=Z.getReady,this.textInfo=m.getReady,this.intervalTypeTextColor="warning-color"}},{key:"_playSound",value:function(){this._audio.play()}},{key:"_roundsCount",value:function(){this.round<this.initialRounds?this.round++:(this.intervalObs$.unsubscribe(),this.textInfo=m.done,this.pause=!0,this.isBlocked=!0)}}]),e}(),s.\u0275fac=function(t){return new(t||s)(f.Y36(l.IN))},s.\u0275cmp=f.Xpm({type:s,selectors:[["app-tabata"]],decls:31,vars:13,consts:[[3,"fullscreen"],[1,"grid","ion-text-center","grid"],[1,"row","ion-align-items-center"],["size","12","size-sm","6","offset-sm","3"],[1,"text"],[1,"text__sm"],["size","12"],[1,"text",3,"ngClass"],["size","12","size-sm","6","offset-sm","3",1,"ion-padding-vertical"],[3,"isBlocked","pause","toggle","reset"]],template:function(t,e){1&t&&(f.TgZ(0,"ion-header"),f.TgZ(1,"ion-toolbar"),f.TgZ(2,"ion-title"),f._uU(3,"Tabata"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(4,"ion-content",0),f.TgZ(5,"ion-grid",1),f.TgZ(6,"ion-row",2),f.TgZ(7,"ion-col",3),f.TgZ(8,"p",4),f._uU(9),f.ALo(10,"timeFormat"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(11,"ion-row",2),f.TgZ(12,"ion-col",3),f.TgZ(13,"p",5),f._uU(14),f.ALo(15,"timeFormat"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(16,"ion-row",2),f.TgZ(17,"ion-col",6),f.TgZ(18,"p",7),f._uU(19),f.qZA(),f.qZA(),f.qZA(),f.TgZ(20,"ion-row",2),f.TgZ(21,"ion-col",3),f.TgZ(22,"p",4),f._uU(23,"Round"),f.qZA(),f.TgZ(24,"p",4),f._uU(25),f.TgZ(26,"span"),f._uU(27),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(28,"ion-row"),f.TgZ(29,"ion-col",8),f.TgZ(30,"player-controls",9),f.NdJ("toggle",function(t){return e.onToggle(t)})("reset",function(){return e.onReset()}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(4),f.Q6J("fullscreen",!0),f.xp6(5),f.Oqu(f.lcZ(10,9,e.clock)),f.xp6(5),f.Oqu(f.lcZ(15,11,e.timeElapsed)),f.xp6(4),f.Q6J("ngClass",e.intervalTypeTextColor),f.xp6(1),f.Oqu(e.textInfo),f.xp6(6),f.Oqu(e.round),f.xp6(2),f.hij("/",e.initialRounds,""),f.xp6(3),f.Q6J("isBlocked",e.isBlocked)("pause",e.pause))},directives:[l.Gu,l.sr,l.wd,l.W2,l.jY,l.Nd,l.wI,c.mk,T.M],pipes:[y.x],styles:[".grid[_ngcontent-%COMP%]{display:flex;flex-flow:column;height:100%}.row[_ngcontent-%COMP%]{flex:1 1 auto}.text[_ngcontent-%COMP%]{font-size:3rem}@media (min-width: 540px){.text[_ngcontent-%COMP%]{font-size:4rem}}.text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.text__sm[_ngcontent-%COMP%], .text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem}@media (min-width: 540px){.text__sm[_ngcontent-%COMP%]{font-size:3rem}}p[_ngcontent-%COMP%]{margin:0}"]}),s)}],v=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[u.Bz.forChild(k)],u.Bz]}),e}(),_=i(4466),x=((r=function e(){t(this,e)}).\u0275fac=function(t){return new(t||r)},r.\u0275mod=f.oAB({type:r}),r.\u0275inj=f.cJS({imports:[[c.ez,a.u5,l.Pc,v,_.m]]}),r)}}])}();