!function(){function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var o=0;o<e.length;o++){var t=e[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function o(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{FXbF:function(e,t,i){"use strict";i.r(t),i.d(t,"TimerPageModule",function(){return M});var r,s,c,l,a=i("ofXK"),u=i("3Pt+"),b=i("TEn/"),d=i("mrSG"),m=i("C6fG"),f=i("fXoL"),p=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}Object(d.c)(e,n),e.prototype.keepAwake=function(){return Object(m.cordova)(this,"keepAwake",{},arguments)},e.prototype.allowSleepAgain=function(){return Object(m.cordova)(this,"allowSleepAgain",{},arguments)},e.pluginName="Insomnia",e.plugin="cordova-plugin-insomnia",e.pluginRef="plugins.insomnia",e.repo="https://github.com/EddyVerbruggen/Insomnia-PhoneGap-Plugin",e.platforms=["Android","Browser","Firefox OS","iOS","Windows","Windows Phone 8"],e.\u0275fac=function(n){return o(n||e)},e.\u0275prov=f.Fb({token:e,factory:function(n){return e.\u0275fac(n)}});var o=f.Qb(e);return e}(m.IonicNativePlugin),h=i("tyNb"),g=i("l5mm"),O=i("vkgz"),k=["createTimerForm"],y=((r=function(){function e(o){n(this,e),this.modalCtrl=o,this.roundsNumber=1,this.defaultTime="00:00:00"}return o(e,[{key:"onDismiss",value:function(){this.modalCtrl.dismiss()}},{key:"onCreateTimer",value:function(n){var e=this.createTimerFormRef.value.fullTime.split(":");this.modalCtrl.dismiss({totalSeconds:60*+e[1]+ +e[2],rounds:this.createTimerFormRef.value.rounds},"confirm","createTimer")}},{key:"onRemoveRound",value:function(){this.roundsNumber--}},{key:"onAddRound",value:function(){this.roundsNumber++}}]),e}()).\u0275fac=function(n){return new(n||r)(f.Jb(b.w))},r.\u0275cmp=f.Db({type:r,selectors:[["ng-component"]],viewQuery:function(n,e){var o;1&n&&f.oc(k,!0),2&n&&f.fc(o=f.Xb())&&(e.createTimerFormRef=o.first)},decls:33,vars:6,consts:[["slot","primary"],[3,"click"],["name","close","slot","icon-only"],[3,"fullscreen"],[3,"submit"],["createTimerForm","ngForm"],["size-sm","6","offset-sm","3",1,"display-flex"],[1,"container","display-flex"],["displayFormat","mm:ss","placeholder","Choose a time","name","fullTime",3,"ngModel","ngModelChange"],["fullTime","ngModel"],[1,"display-block"],[1,"display-block","rounds-number"],["type","number","name","rounds","min","0","placeholder","0",1,"ion-hide",3,"ngModel","ngModelChange"],["rounds","ngModel"],[1,"cta"],["type","button","color","medium   ",3,"disabled","click"],["name","remove-outline","slot","icon-only"],["type","button","color","light",3,"click"],["name","add","slot","icon-only"],["type","submit","expand","block","color","primary",3,"disabled"]],template:function(n,e){if(1&n){var o=f.Pb();f.Ob(0,"ion-header"),f.Ob(1,"ion-toolbar"),f.Ob(2,"ion-title"),f.lc(3,"New timer"),f.Nb(),f.Ob(4,"ion-buttons",0),f.Ob(5,"ion-button",1),f.Wb("click",function(){return e.onDismiss()}),f.Kb(6,"ion-icon",2),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Ob(7,"ion-content",3),f.Ob(8,"form",4,5),f.Wb("submit",function(){f.hc(o);var n=f.gc(9);return e.onCreateTimer(n)}),f.Ob(10,"ion-grid"),f.Ob(11,"ion-row"),f.Ob(12,"ion-col",6),f.Ob(13,"div",7),f.Ob(14,"ion-item"),f.Ob(15,"ion-label"),f.lc(16,"Round duration"),f.Nb(),f.Ob(17,"ion-datetime",8,9),f.Wb("ngModelChange",function(n){return e.defaultTime=n}),f.Nb(),f.Nb(),f.Nb(),f.Ob(19,"div",7),f.Ob(20,"ion-text",10),f.lc(21,"ROUNDS"),f.Nb(),f.Ob(22,"ion-text",11),f.lc(23),f.Nb(),f.Ob(24,"ion-input",12,13),f.Wb("ngModelChange",function(n){return e.roundsNumber=n}),f.Nb(),f.Ob(26,"div",14),f.Ob(27,"ion-button",15),f.Wb("click",function(){return e.onRemoveRound()}),f.Kb(28,"ion-icon",16),f.Nb(),f.Ob(29,"ion-button",17),f.Wb("click",function(){return e.onAddRound()}),f.Kb(30,"ion-icon",18),f.Nb(),f.Nb(),f.Nb(),f.Ob(31,"ion-button",19),f.lc(32,"Create"),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Nb()}if(2&n){var t=f.gc(9);f.yb(7),f.ec("fullscreen",!0),f.yb(10),f.ec("ngModel",e.defaultTime),f.yb(6),f.mc(e.roundsNumber),f.yb(1),f.ec("ngModel",e.roundsNumber),f.yb(3),f.ec("disabled",e.roundsNumber<=1),f.yb(4),f.ec("disabled",t.invalid)}},directives:[b.h,b.t,b.s,b.c,b.b,b.i,b.e,u.g,u.d,u.e,b.g,b.n,b.d,b.k,b.l,b.f,b.z,u.c,u.f,b.r,b.j,b.x],styles:["form[_ngcontent-%COMP%], ion-grid[_ngcontent-%COMP%], ion-row[_ngcontent-%COMP%]{height:100%}.display-block[_ngcontent-%COMP%]{display:block;text-align:center}.display-flex[_ngcontent-%COMP%]{display:flex;flex-flow:column}.container[_ngcontent-%COMP%]{flex:1 1 auto}.rounds-number[_ngcontent-%COMP%]{font-size:3rem}.cta[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex:1 1 auto;align-items:center}"]}),r),v=i("K1R0"),N=i("mlae"),w=i("dDfN"),C=[{path:"",component:(s=function(){function e(o,t){n(this,e),this.insomnia=o,this.modalCtrl=t,this.rounds=1,this.clock=70,this.pause=!0,this.isBlocked=!1,this.initialRounds=this.rounds,this.isDone=!1,this.radius=100,this.percent=0,this.progress=1,this._initialClock=this.clock,this.TAP_SOUND="../../assets/sounds/button-50.mp3"}return o(e,[{key:"ngOnInit",value:function(){this._audio=new Audio(this.TAP_SOUND)}},{key:"ionViewDidLeave",value:function(){this.onReset()}},{key:"ngOnDestroy",value:function(){this.onReset()}},{key:"onCreateTimer",value:function(){var n=this;this.onReset(),this.modalCtrl.create({keyboardClose:!0,component:y,id:"createTimer"}).then(function(e){return Object(d.a)(n,void 0,void 0,regeneratorRuntime.mark(function n(){var o,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.present(),this.pause=!0,n.next=3,e.onWillDismiss();case 3:o=n.sent,(t=o.data)&&(0!==t.totalSeconds&&(this._initialClock=t.totalSeconds,this.clock=t.totalSeconds),this.initialRounds=t.rounds);case 6:case"end":return n.stop()}},n,this)}))})}},{key:"onToggle",value:function(n){var e=this;this.pause=!this.pause,this.pause&&this.intervalObs$?this.intervalObs$.unsubscribe():this.intervalObs$=Object(g.a)(1e3).pipe(Object(O.a)(function(){e.percent=Math.floor(e.progress/e._initialClock*100),e.progress++,e.clock--,e.clock>=1&&e.clock<=3&&e._playSound(),e.clock<0&&e.initialRounds>1?e._roundsCount():e.clock<0&&(e.pause=!0,e.isBlocked=!0,e.intervalObs$.unsubscribe()),e.insomnia.keepAwake()})).subscribe(function(){})}},{key:"onReset",value:function(){this.intervalObs$&&this.intervalObs$.unsubscribe(),this.pause=!0,this.isBlocked=!1,this.clock=this._initialClock,this.rounds=1,this.percent=0,this.progress=1,this.insomnia.allowSleepAgain()}},{key:"_playSound",value:function(){this._audio.play()}},{key:"_roundsCount",value:function(){this.progress=1,this.percent=0,this.rounds<this.initialRounds?(this.clock=this._initialClock,this.rounds++):(this.intervalObs$.unsubscribe(),this.pause=!0,this.isBlocked=!0)}}]),e}(),s.\u0275fac=function(n){return new(n||s)(f.Jb(p),f.Jb(b.w))},s.\u0275cmp=f.Db({type:s,selectors:[["app-timer"]],decls:28,vars:20,consts:[["slot","primary"],[3,"click"],["color","primary","name","add","slot","icon-only"],[3,"fullscreen"],[1,"grid","ion-text-center","grid"],[1,"row","ion-align-items-center"],["size","12","size-sm","6","offset-sm","3"],[1,"clock"],[3,"percent","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","innerStrokeColor","animation","animationDuration","title","showTitle","showUnits","showSubtitle","click"],["size","12","size-sm","6","offset-sm","3",1,"ion-padding-vertical"],[3,"isBlocked","pause","toggle","reset"]],template:function(n,e){1&n&&(f.Ob(0,"ion-header"),f.Ob(1,"ion-toolbar"),f.Ob(2,"ion-title"),f.lc(3,"Timer"),f.Nb(),f.Ob(4,"ion-buttons",0),f.Ob(5,"ion-button",1),f.Wb("click",function(){return e.onCreateTimer()}),f.Kb(6,"ion-icon",2),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Ob(7,"ion-content",3),f.Ob(8,"ion-grid",4),f.Ob(9,"ion-row",5),f.Ob(10,"ion-col",6),f.Ob(11,"p",7),f.lc(12),f.ac(13,"timeFormat"),f.Nb(),f.Nb(),f.Nb(),f.Ob(14,"ion-row"),f.Ob(15,"ion-col",6),f.Ob(16,"circle-progress",8),f.Wb("click",function(){return e.onToggle()}),f.Nb(),f.Nb(),f.Nb(),f.Ob(17,"ion-row",5),f.Ob(18,"ion-col",6),f.Ob(19,"p",7),f.lc(20,"Round"),f.Nb(),f.Ob(21,"p",7),f.lc(22),f.Ob(23,"span"),f.lc(24),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Ob(25,"ion-row"),f.Ob(26,"ion-col",9),f.Ob(27,"player-controls",10),f.Wb("toggle",function(n){return e.onToggle(n)})("reset",function(){return e.onReset()}),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Nb()),2&n&&(f.yb(7),f.ec("fullscreen",!0),f.yb(5),f.mc(f.bc(13,18,e.clock)),f.yb(4),f.ec("percent",e.percent)("radius",e.radius)("outerStrokeWidth",16)("innerStrokeWidth",8)("outerStrokeColor","#428cff")("innerStrokeColor","#50c8ff")("animation",!1)("animationDuration",300)("title",e.pause?"Resting":"On")("showTitle",!0)("showUnits",!1)("showSubtitle",!1),f.yb(6),f.mc(e.rounds),f.yb(2),f.nc("/",e.initialRounds,""),f.yb(3),f.ec("isBlocked",e.isBlocked)("pause",e.pause))},directives:[b.h,b.t,b.s,b.c,b.b,b.i,b.e,b.g,b.n,b.d,v.a,N.a],pipes:[w.a],styles:[".grid[_ngcontent-%COMP%]{display:flex;flex-flow:column;height:100%}.row[_ngcontent-%COMP%]{flex:1 1 auto}.clock[_ngcontent-%COMP%]{font-size:4rem}@media (min-width:540px){.clock[_ngcontent-%COMP%]{font-size:5rem}}.clock[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:3rem;color:var(--ion-color-medium)}p[_ngcontent-%COMP%]{margin:0}"]}),s)}],T=((c=function e(){n(this,e)}).\u0275mod=f.Hb({type:c}),c.\u0275inj=f.Gb({factory:function(n){return new(n||c)},imports:[[h.i.forChild(C)],h.i]}),c),_=i("PCNd"),M=((l=function e(){n(this,e)}).\u0275mod=f.Hb({type:l}),l.\u0275inj=f.Gb({factory:function(n){return new(n||l)},providers:[p],imports:[[a.b,u.a,b.u,T,_.a]]}),l)}}])}();